services:
  # PostgreSQL Database
  - type: pspg
    name: printandread-db
    plan: free  # Free for 90 days, then $7/month
    databaseName: printandread
    user: printandread_user
    region: singapore

  # Frontend Web Service
  - type: web
    name: printandread-frontend
    runtime: docker  # Using Docker for Angular + nginx
    plan: free  # Free tier (spins down after 15 min inactivity)
    region: singapore
    # DO NOT set rootDirectory - it causes path doubling with Docker Build Context
    dockerfilePath: frontend/Dockerfile  # Path from repo root
    # Docker Build Context Directory must be set to "frontend" in dashboard manually
    healthCheckPath: /health
